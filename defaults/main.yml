---

WG_HC:
  path_config: '/etc/wireguard'
  default_port: 51820
  ext:
    key: 'key'
    pub: 'pub'
    psk: 'psk'

  sysctl:
    forwarding:
      enable:
        'net.ipv4.ip_forward': 1
        'net.ipv4.conf.all.arp_filter': 0
        'net.ipv4.conf.all.rp_filter': 2
      disable:
        'net.ipv4.ip_forward': 0

# default config => is overwritten by provided config
default_wg:
  topologies: {}
  path_keys: "{{ WG_HC.path_config }}/keys"
  support:
    dns: true
    traffic_forwarding: false
  log_prefix: 'wireguard'

WG_CONFIG: "{{ default_wg | combine(wireguard, recursive=true) }}"

default_topology_config:
  type: 'single'  # star/mesh
  peers: {}
  psk: true

default_local_config:
  peers: {}
  ListenPort: "{{ WG_HC.default_port }}"
  Address: ['']
  FwMark: ''
  DNS:
    - '1.1.1.1'
    - '8.8.8.8'
  MTU: 1500
  PreUp: []
  PostUp: []
  PreDown: []
  PostDown: []
  Table: 'off'  # set to number (p.e. 1000) to enable auto-added routes => if you do so, you will most probably need to modify your peers 'AllowedIPs' or lock yourself out (;

default_peer_config:
  Endpoint: ''
  EndpointPort: "{{ WG_HC.default_port }}"
  AllowedIPs:
    - '0.0.0.0/0'
    - '::/0'
  PersistentKeepalive: 0  # set to 25 if the connection is NATed
